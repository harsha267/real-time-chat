<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Real-Time Chat App</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Left Sidebar: User List -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>Chat App</h2>
        <div class="status-indicator" id="connectionStatus">
          <span class="status-dot"></span>
          <span id="statusText">Connecting...</span>
        </div>
      </div>

      <!-- Username Registration -->
      <div class="user-registration" id="userRegistration">
        <input 
          type="text" 
          id="usernameInput" 
          placeholder="Enter your username" 
          maxlength="20"
        >
        <button id="registerBtn">Join Chat</button>
        <div id="registrationError" class="error-message"></div>
      </div>

      <!-- Current User Display -->
      <div class="current-user" id="currentUser" style="display: none;">
        <div class="user-info">
          <span class="user-avatar">ðŸ‘¤</span>
          <span id="currentUsername"></span>
        </div>
      </div>

      <!-- Tabs for Users and Groups -->
      <div class="tabs">
        <button class="tab-btn active" data-tab="users">Users</button>
        <button class="tab-btn" data-tab="groups">Groups</button>
      </div>

      <!-- Online Users List -->
      <div class="users-section" id="usersSection">
        <h3>Online Users</h3>
        <div id="usersList" class="users-list">
          <p class="empty-state">No users online</p>
        </div>
      </div>

      <!-- Groups Section -->
      <div class="users-section" id="groupsSection" style="display: none;">
        <div class="group-header">
          <h3>Groups</h3>
          <button id="createGroupBtn" class="create-btn" title="Create Group">+</button>
        </div>
        <div id="groupsList" class="users-list">
          <p class="empty-state">No groups available</p>
        </div>
      </div>

      <!-- Create Group Modal -->
      <div id="createGroupModal" class="modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Create or Join Group</h3>
            <button class="close-btn" id="closeModalBtn">&times;</button>
          </div>
          <div class="modal-body">
            <input 
              type="text" 
              id="groupNameInput" 
              placeholder="Enter group name" 
              maxlength="30"
            >
            <div id="groupError" class="error-message"></div>
          </div>
          <div class="modal-footer">
            <button id="createGroupSubmitBtn" class="submit-btn">Create/Join</button>
          </div>
        </div>
      </div>

      <!-- Add/Remove User Modal -->
      <div id="userManagementModal" class="modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3 id="userManagementTitle">Add User to Group</h3>
            <button class="close-btn" id="closeUserModalBtn">&times;</button>
          </div>
          <div class="modal-body">
            <input 
              type="text" 
              id="usernameInputModal" 
              placeholder="Enter username" 
              maxlength="20"
            >
            <div id="userManagementError" class="error-message"></div>
          </div>
          <div class="modal-footer">
            <button id="userManagementSubmitBtn" class="submit-btn">Confirm</button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Chat Area -->
    <main class="chat-container">
      <!-- Chat Header -->
      <div class="chat-header">
        <div id="chatHeaderContent">
          <h2>Select a user to start chatting</h2>
        </div>
        <div id="groupActions" style="display: none;">
          <button id="addUserBtn" class="action-btn" title="Add User">+ User</button>
          <button id="removeUserBtn" class="action-btn" title="Remove User">- User</button>
        </div>
      </div>

      <!-- Messages Area -->
      <div class="messages-container" id="messagesContainer">
        <div class="welcome-message">
          <p>ðŸ‘‹ Welcome! Register with a username and select a user to start chatting.</p>
        </div>
      </div>

      <!-- Message Input Area -->
      <div class="input-container" id="inputContainer" style="display: none;">
        <div class="input-wrapper">
          <input 
            type="text" 
            id="messageInput" 
            placeholder="Type a message..." 
            maxlength="500"
          >
          <button id="sendBtn" disabled>
            <span>Send</span>
          </button>
        </div>
      </div>
    </main>
  </div>

  <!-- Socket.IO Client Library -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="app.js"></script>
</body>
</html>

